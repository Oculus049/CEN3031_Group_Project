<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Group-UP Scheduling</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#FFA500] min-h-screen font-sans">

  <!-- Preview Banner -->
  <div class="bg-black text-white text-sm px-4 py-2 flex justify-between items-center">
    <div>This is a preview. To book an event, share the link with your invitees.</div>
    <div>
      <a href="home.html" class="text-xs underline px-2 py-1 flex items-center gap-1" aria-label="View live page">
        View live page
        <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M14 3h7m0 0v7m0-7L10 14m-4 0h.01" />
        </svg>
      </a>
    </div>
  </div>

  <div class="flex flex-col lg:flex-row max-w-5xl mx-auto mt-10 gap-8 px-4">
    <!-- Left: Available hours -->
    <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-8 w-full lg:w-1/3 flex flex-col justify-between">
      <div>
        <div class="flex items-center justify-between mb-6">
          <h1 class="text-lg font-semibold text-blue-900 underline mb-0">Scheduling Settings</h1>
          <a href="home" class="text-sm text-gray-500 hover:underline">&larr; Back</a>
        </div>
        <h2 class="font-extrabold text-2xl mb-2 text-blue-900">Available hours</h2>
        <p class="text-sm text-gray-600 mb-4">
          Set the times that people will be able to schedule these types of meetings with you.
        </p>
        <div class="text-sm text-blue-600 cursor-pointer mb-6">Custom hours</div>
        <div class="bg-gray-50 rounded-lg p-4 space-y-4">
          <!-- Sunday -->
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
              <input type="checkbox" id="sun" class="h-4 w-4 day-checkbox" />
              <label for="sun" class="font-medium">SUN</label>
            </div>
            <div class="flex-1"></div>
            <button aria-label="Add Sunday hours" class="text-blue-600 px-2 py-1 rounded hover:bg-blue-50">+</button>
          </div>
          <!-- Monday -->
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
              <input type="checkbox" id="mon" class="h-4 w-4 day-checkbox" />
              <label for="mon" class="font-medium">MON</label>
            </div>
            <div class="flex-1"></div>
            <button aria-label="Add Monday hours" class="text-blue-600 px-2 py-1 rounded hover:bg-blue-50">+</button>
          </div>
          <!-- Tuesday -->
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
              <input type="checkbox" id="tue" class="h-4 w-4 day-checkbox"  />
              <label for="tue" class="font-medium">TUE</label>
            </div>
            <div class="flex gap-2 items-center">
              <input type="time" value="08:00" class="w-20 border rounded px-2 py-1 text-sm" aria-label="Tuesday start" />
              <span class="text-sm">-</span>
              <input type="time" value="17:00" class="w-20 border rounded px-2 py-1 text-sm" aria-label="Tuesday end" />
              <button aria-label="Remove range" class="text-gray-400 ml-1">x</button>
              <button aria-label="Add additional range" class="text-blue-600 ml-2">+</button>
            </div>
          </div>
          <!-- Wednesday -->
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
              <input type="checkbox" id="wed" class="h-4 w-4 day-checkbox"  />
              <label for="wed" class="font-medium">WED</label>
            </div>
            <div class="flex gap-2 items-center">
              <input type="time" value="08:00" class="w-20 border rounded px-2 py-1 text-sm" aria-label="Wednesday start" />
              <span class="text-sm">-</span>
              <input type="time" value="17:00" class="w-20 border rounded px-2 py-1 text-sm" aria-label="Wednesday end" />
              <button aria-label="Remove range" class="text-gray-400 ml-1">x</button>
              <button aria-label="Add additional range" class="text-blue-600 ml-2">+</button>
            </div>
          </div>
          <!-- Thursday -->
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
              <input type="checkbox" id="thu" class="h-4 w-4 day-checkbox"  />
              <label for="thu" class="font-medium">THU</label>
            </div>
            <div class="flex gap-2 items-center">
              <input type="time" value="08:00" class="w-20 border rounded px-2 py-1 text-sm" aria-label="Thursday start" />
              <span class="text-sm">-</span>
              <input type="time" value="17:00" class="w-20 border rounded px-2 py-1 text-sm" aria-label="Thursday end" />
              <button aria-label="Remove range" class="text-gray-400 ml-1">x</button>
              <button aria-label="Add additional range" class="text-blue-600 ml-2">+</button>
            </div>
          </div>
          <!-- Friday -->
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
              <input type="checkbox" id="fri" class="h-4 w-4 day-checkbox"  />
              <label for="fri" class="font-medium">FRI</label>
            </div>
            <div class="flex gap-2 items-center">
              <input type="time" value="09:00" class="w-20 border rounded px-2 py-1 text-sm" aria-label="Friday start" />
              <span class="text-sm">-</span>
              <input type="time" value="17:00" class="w-20 border rounded px-2 py-1 text-sm" aria-label="Friday end" />
              <button aria-label="Remove range" class="text-gray-400 ml-1">x</button>
              <button aria-label="Add additional range" class="text-blue-600 ml-2">+</button>
            </div>
          </div>
          <!-- Saturday -->
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
              <input type="checkbox" id="sat" class="h-4 w-4 day-checkbox" />
              <label for="sat" class="font-medium">SAT</label>
            </div>
            <div class="flex-1"></div>
            <button aria-label="Add Saturday hours" class="text-blue-600 px-2 py-1 rounded hover:bg-blue-50">+</button>
          </div>
        </div>
      </div>
      <div class="flex justify-end gap-3 mt-8">
        <button class="px-5 py-2 border rounded-md text-sm">Cancel</button>
        <button class="px-5 py-2 bg-blue-900 text-white rounded-md text-sm hover:bg-indigo-900 transition">Save and close</button>
      </div>
    </div>

    <!-- Right: Calendar-only panel -->
    <div class="bg-white rounded-xl shadow-lg border border-gray-200 w-full lg:w-2/3 flex flex-col">
      <div class="border-b px-8 py-6 flex items-center justify-between">
        <span class="text-2xl font-extrabold text-blue-900">Group-UP</span>
        <span class="text-xs bg-black text-white px-3 py-1 rounded">This is a preview.</span>
      </div>
      <div class="px-8 py-8 flex flex-col flex-1">
        <!-- Calendar Header -->
        <div class="flex justify-between items-center mb-4">
          <div class="text-xl font-bold text-blue-900">Select a Date &amp; Time</div>
          <div class="flex gap-2 text-sm">
            <button aria-label="Previous month" id="prevMonth" class="cursor-pointer px-3 py-1 rounded-full border border-blue-900 text-blue-900 hover:bg-blue-50">&lt;</button>
            <div class="px-3 py-1 font-bold text-blue-900" id="currentMonth">August 2025</div>
            <button aria-label="Next month" id="nextMonth" class="cursor-pointer px-3 py-1 rounded-full border border-blue-900 text-blue-900 hover:bg-blue-50">&gt;</button>
          </div>
        </div>

        <!-- Weekday Labels -->
        <div class="grid grid-cols-7 gap-2 text-center text-xs text-gray-600 mb-2">
          <div class="font-bold">SUN</div>
          <div class="font-bold">MON</div>
          <div class="font-bold">TUE</div>
          <div class="font-bold">WED</div>
          <div class="font-bold">THU</div>
          <div class="font-bold">FRI</div>
          <div class="font-bold">SAT</div>
        </div>

        <!-- Calendar Grid -->
        <div id="calendarGrid" class="grid grid-cols-7 gap-2 text-sm flex-1 auto-rows-min">
          <!-- Dynamically filled by JS -->
        </div>
        

        <!-- Footer timezone & action -->
        <div class="mt-6 w-full border-t pt-4 flex justify-between items-center">
          <div class="text-sm text-gray-500 flex items-center gap-2">
            <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2-1.343-2-3-2zM5 20h14a2 2 0 002-2v-5a5 5 0 00-5-5H8a5 5 0 00-5 5v5a2 2 0 002 2z" />
            </svg>
            Eastern Time - US &amp; Canada (11:07 AM)
          </div>
          <div class="flex items-center gap-2">
            <button aria-label="Troubleshoot" class="px-4 py-2 border rounded-md text-sm flex items-center gap-2 hover:bg-blue-50 border-blue-900 text-blue-900">
              <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M9.75 17a2.25 2.25 0 004.5 0m-7.5-6.75a6 6 0 1112 0v3.75a2.25 2.25 0 01-2.25 2.25h-7.5A2.25 2.25 0 015.25 14V10.25z" />
              </svg>
              Troubleshoot
            </button>
            <span class="text-xs text-gray-500">ⓘ</span>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div id="meetingForm" class="hidden fixed inset-0 z-10 flex items-center justify-center bg-black bg-opacity-50">
  <div class="bg-white rounded-lg p-6 w-80">
    <h3 id="meetingFormTitle" class="text-lg font-semibold mb-4"></h3>
    <label class="block mb-2">
      Title
      <input type="text" id="meetingTitleInput" class="w-full border rounded px-2 py-1" />
    </label>
    <label class="block mb-4">
      Time
      <input
        type="time"
        id="meetingTimeInput"
        class="w-full border rounded px-2 py-1"
        min="08:00"
        max="17:00"
       />
    </label>
    <div class="flex justify-end gap-2">
      <button id="meetingCancel" class="px-3 py-1">Cancel</button>
      <button id="meetingSave" class="px-3 py-1 bg-blue-900 text-white rounded">Save</button>
    </div>
  </div>
</div>

  <script>
    // Calendar for August 2025
    const calendarGrid = document.getElementById('calendarGrid');
    const currentMonthEl = document.getElementById('currentMonth');
    const prevBtn = document.getElementById('prevMonth');
    const nextBtn = document.getElementById('nextMonth');
    const selectedDates = new Set();

    const formModal = document.getElementById('meetingForm');
    const meetingFormTitle = document.getElementById('meetingFormTitle');
    const meetingTitleIn = document.getElementById('meetingTitleInput');
    const meetingTimeIn = document.getElementById('meetingTimeInput');
    const btnSave = document.getElementById('meetingSave');
    const btnCancel = document.getElementById('meetingCancel');

    let pendingDayBtn = null;
    let pendingDayKey = '';

    // Start with August 2025
    let currentYear = 2025;
    let currentMonth = 7; // August

    const monthNames = [
      'January', 'February', 'March', 'April', 'May', 'June',
      'July', 'August', 'September', 'October', 'November', 'December'
    ];

    function daysInMonth(year, month) {
      return new Date(year, month + 1, 0).getDate();
    }

    function firstWeekdayOfMonth(year, month) {
      return new Date(year, month, 1).getDay();
    }


    function renderCalendar() {
      calendarGrid.innerHTML = '';
      currentMonthEl.textContent = `${monthNames[currentMonth]} ${currentYear}`;

      const totalDays = daysInMonth(currentYear, currentMonth);
      const offset = firstWeekdayOfMonth(currentYear, currentMonth);

      for (let i = 0; i < offset; i++) {
        const blank = document.createElement('div');
        calendarGrid.appendChild(blank);
      }

      for (let day = 1; day <= totalDays; day++) {
        const wrapper = document.createElement('div');
        wrapper.className = 'h-12 flex items-center justify-center';

        const btn = document.createElement('button');
        btn.type = 'button';
        btn.textContent = day;
        btn.setAttribute('aria-label', `Select ${monthNames[currentMonth]} ${day}, ${currentYear}`);
        btn.setAttribute('aria-pressed', 'false');
        btn.className = 'w-8 h-8 rounded flex items-center justify-center font-medium border';
        btn.style.transition = 'all .15s ease';


        const highlighted = []; // Example highlighted days
        const key = `${currentYear}-${currentMonth}-${day}`;


        if (highlighted.includes(day)) {
          btn.classList.add('bg-blue-100', 'border-2', 'border-blue-900', 'text-blue-900', 'font-bold');
        } else {
          btn.classList.add('border', 'text-gray-700');
        }


        btn.addEventListener('click', () => {
            pendingDayBtn = btn;
            pendingDayKey = `${currentYear}-${currentMonth}-${day}`;

            const weekdayIndex = new Date(currentYear, currentMonth, day).getDay();
            const dayIds = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];
            const cb = document.getElementById(dayIds[weekdayIndex]);
            if (cb && !cb.checked) {
              cb.checked = true;
              cb.dispatchEvent(new Event('change'));
            }

            meetingFormTitle.textContent = `Schedule Meeting for ${monthNames[currentMonth]} ${day}, ${currentYear}`;
            meetingTitleIn.value = '';
            meetingTimeIn.value = '';
            formModal.classList.remove('hidden');
        });

        wrapper.appendChild(btn);
        calendarGrid.appendChild(wrapper);
      }
    }

    btnCancel.addEventListener('click', () => {
      formModal.classList.add('hidden');
    });

    btnSave.addEventListener('click', () => {
      const title = meetingTitleIn.value.trim();
      const time = meetingTimeIn.value.trim();

      if (!title || !time) {
        alert('Please enter both a title and time for the meeting.');
        return;
      }

      if (time < '08:00' || time > '17:00') {
        alert('Please select a time between 08:00 and 17:00.');
        return;
      }
      console.log('Meeting scheduled:', { date: pendingDayKey, title, time });
      
      if (pendingDayBtn.getAttribute('aria-pressed') === 'true') {
        pendingDayBtn.setAttribute('aria-pressed', 'false');
        pendingDayBtn.classList.remove('bg-blue-100', 'border-2', 'border-blue-900', 'text-blue-900', 'font-bold');
      } else {
        pendingDayBtn.setAttribute('aria-pressed', 'true');
        pendingDayBtn.classList.add('bg-blue-100', 'border-2', 'border-blue-900', 'text-blue-900', 'font-bold');
      }
      formModal.classList.add('hidden');
    });

    prevBtn.addEventListener('click', () => {
      if (currentMonth === 0) {
        currentMonth = 11;
        currentYear--;
      } else {
        currentMonth--;
      }
      renderCalendar();
    });

    nextBtn.addEventListener('click', () => {
      if (currentMonth === 11) {
        currentMonth = 0;
        currentYear++;
      } else {
        currentMonth++;
      }
      renderCalendar();
    });

    renderCalendar();


    document.querySelectorAll('.day-checkbox').forEach(cb => {
        const row = cb.closest('div.flex.items-center.justify-between');
        const label = row.querySelector('label');

        function makeTimeRange() {
            const container = document.createElement('div');
            container.className = 'flex gap-2 items-center';
            container.innerHTML = `
                <input type="time" value="08:00" class="w-20 border rounded px-2 py-1 text-sm" aria-label="${label.textContent} start" />
                <span class="text-sm">-</span>
                <input type="time" value="17:00" class="w-20 border rounded px-2 py-1 text-sm" aria-label="${label.textContent} end" />
                <button aria-label="Remove range" class="text-gray-400 ml-1">x</button>
                <button aria-label="Add additional range" class="text-blue-600 ml-2">+</button>
            `;
            container.querySelector('button[aria-label="Remove range"]').addEventListener('click', () => {
                container.remove();
            });
            return container;
        }

        function setAvailable() {
            const unavailable = row.querySelector('.text-sm.text-gray-500');
            if (unavailable) unavailable.remove();
            if (!row.querySelector('input[type="time"]')) {
                const plus = row.querySelector('button[aria-label^="Add"]');
                plus.before(makeTimeRange());
            }
        }

        function setUnavailable() {
            // remove time ranges and buttons
            row.querySelectorAll('input[type="time"], button[aria-label="Remove range"], button[aria-label="Add additional range"]').forEach(el => el.remove());
        }

        if (cb.checked) {
            setAvailable();
        } else {
            setUnavailable();
        }
        cb.addEventListener('change', (e) => {
            if (e.target.checked) {
                setAvailable();
            } else {
                setUnavailable();
            }
        });
    });

  </script>

</body>

</html>
